# -- Global settings
# -- Whether to create the Namespace resource (set false when using --create-namespace)
createNamespace: false

# -- Controller settings
controller:
  # -- Number of controller replicas
  replicas: 1
  image:
    # -- Controller image repository
    repository: localhost/mcp-governance-controller
    # -- Controller image tag
    tag: latest
    # -- Image pull policy (use "Never" for Kind, "Always" for remote registries)
    pullPolicy: Never
  # -- Controller API port
  port: 8090
  service:
    # -- Service type for the controller (ClusterIP, NodePort, or LoadBalancer)
    type: ClusterIP
    # -- NodePort to expose when type is NodePort (null for auto-assign)
    nodePort: null
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi
  livenessProbe:
    initialDelaySeconds: 5
    periodSeconds: 10
  readinessProbe:
    initialDelaySeconds: 3
    periodSeconds: 5
  # -- Name of the Kubernetes Secret containing the Google API key (key: google-api-key)
  googleApiKeySecret: "mcp-governance-ai-secrets"
  serviceAccount:
    # -- Create a service account for the controller
    create: true
    # -- Name of the service account
    name: mcp-governance-controller

# -- Dashboard settings
dashboard:
  # -- Enable the dashboard deployment
  enabled: true
  # -- Number of dashboard replicas
  replicas: 1
  image:
    # -- Dashboard image repository
    repository: localhost/mcp-governance-dashboard
    # -- Dashboard image tag
    tag: latest
    # -- Image pull policy (use "Never" for Kind, "Always" for remote registries)
    pullPolicy: Never
  # -- Dashboard port
  port: 3000
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi
  service:
    # -- Service type: NodePort for Kind, LoadBalancer or ClusterIP for production
    type: NodePort
    # -- NodePort to expose (set to null to auto-assign)
    nodePort: 30000
  # -- Controller API URL for the dashboard's server-side proxy (CONTROLLER_API_URL).
  # -- The dashboard proxies browser requests via Next.js rewrites, so this is
  # -- a pod-to-pod URL, not a browser-facing one.
  # -- Leave empty to auto-detect using in-cluster DNS
  # -- (http://mcp-governance-controller.<namespace>.svc.cluster.local:<port>).
  # -- Override for local dev, e.g. "http://localhost:8090".
  apiUrl: ""

# -- CRD installation
# -- Governance CRDs (MCPGovernancePolicy, GovernanceEvaluation) are installed
# -- automatically from the chart's crds/ directory. To skip, use: --skip-crds
crds:
  # -- Install external stub CRDs for demo (AgentGateway, Kagent)
  installExternal: false

# -- Sample resources
samples:
  # -- Install sample MCPGovernancePolicy and GovernanceEvaluation
  install: false

# -- Governance policy defaults (used when samples.install is true)
governancePolicy:
  name: enterprise-mcp-policy
  spec:
    requireAgentGateway: true
    requireJWTAuth: true
    requireRBAC: true
    requireCORS: true
    requireTLS: true
    requirePromptGuard: true
    requireRateLimit: true
    maxToolsWarning: 10
    maxToolsCritical: 15
    scoringWeights:
      agentGatewayIntegration: 25
      authentication: 20
      authorization: 15
      corsPolicy: 10
      tlsEncryption: 10
      promptGuard: 5
      rateLimit: 5
      toolScope: 10
    severityPenalties:
      critical: 40
      high: 25
      medium: 15
      low: 5
    targetNamespaces: []
    # -- Namespaces to exclude from scanning (system namespaces excluded by default)
    excludeNamespaces:
      - kube-system
      - kube-public
      - kube-node-lease
      - local-path-storage
    # -- AI Agent configuration for AI-driven governance scoring
    aiAgent:
      # -- Enable AI-driven scoring alongside algorithmic scoring
      enabled: false
      # -- LLM provider: "gemini" or "ollama"
      provider: gemini
      # -- Model name (e.g. "gemini-2.5-flash", "llama3.1", "qwen2.5")
      model: "gemini-2.5-flash"
      # -- Ollama API endpoint (only used when provider is "ollama")
      ollamaEndpoint: "http://localhost:11434"
      # -- Interval between periodic AI evaluations (e.g. "5m", "10m", "1h")
      scanInterval: "5m"
      # -- Whether periodic AI scanning is active (set false to only allow manual triggers)
      scanEnabled: true

# -- Image pull secrets (for private registries)
imagePullSecrets: []

# -- Additional labels to apply to all resources
commonLabels: {}

# -- Additional annotations to apply to all resources
commonAnnotations: {}
